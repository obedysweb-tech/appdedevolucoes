CRIAR UM APLICATIVO WEB RESPONSIVO 

NEXT.JS
SHADCN
TYPERSCRIPT

TELAS:

LOGIN
DASHBOARD
RESUMO
RELATÃ“RIOS
CONFIGURAÃ‡Ã•ES
PERFIL

TELA

ğŸ¯ VISÃƒO GERAL (Dashboard Principal)
KPIs (cards no topo)
â€¢	ğŸ” Total de devoluÃ§Ãµes (perÃ­odo)
â€¢	ğŸ’° Valor total devolvido
â€¢	ğŸ“¦ Quantidade de produtos devolvidos
â€¢	ğŸ‘¥ Clientes com mais devoluÃ§Ãµes
â€¢	ğŸ§‘â€ğŸ’¼ Vendedores com maior Ã­ndice de devoluÃ§Ã£o
â€¢	ğŸ“Š Taxa de devoluÃ§Ã£o (%)
â€¢	â± Tempo mÃ©dio atÃ© a devoluÃ§Ã£o
â€¢	âš ï¸ DevoluÃ§Ãµes fora do SLA
________________________________________
ğŸ“Š GRÃFICOS ESSENCIAIS
1ï¸âƒ£ EvoluÃ§Ã£o no Tempo
â€¢	Linha / Ãrea
o	DevoluÃ§Ãµes por dia / semana / mÃªs
o	Valor devolvido ao longo do tempo
â€¢	Insight:
o	ğŸ“ˆ TendÃªncia de aumento ou queda
o	Sazonalidade (datas especÃ­ficas)
________________________________________
2ï¸âƒ£ Motivos de DevoluÃ§Ã£o
â€¢	Pizza ou Barra
o	Defeito
o	Produto errado
o	Avaria no transporte
o	Arrependimento
o	Outros
â€¢	Insight:
o	ğŸ¯ Qual causa atacar primeiro
________________________________________
3ï¸âƒ£ DevoluÃ§Ãµes por Produto
â€¢	Barra horizontal
o	Top 10 produtos mais devolvidos
â€¢	Heatmap
o	Produto Ã— Motivo
â€¢	Insight:
o	ğŸ§¨ Produtos problemÃ¡ticos
________________________________________
4ï¸âƒ£ DevoluÃ§Ãµes por Cliente
â€¢	Barra
o	Clientes com maior volume
â€¢	DispersÃ£o
o	Valor comprado Ã— valor devolvido
â€¢	Insight:
o	ğŸš© Clientes com comportamento atÃ­pico
________________________________________
5ï¸âƒ£ DevoluÃ§Ãµes por Vendedor
â€¢	Ranking em barras
â€¢	Boxplot
o	Comparar vendedores
â€¢	Insight:
o	ğŸ§‘â€ğŸ« Necessidade de treinamento
________________________________________
6ï¸âƒ£ DevoluÃ§Ãµes GeogrÃ¡ficas
â€¢	Mapa (UF / Cidade)
â€¢	Mapa de calor
â€¢	Insight:
o	ğŸŒ RegiÃµes com maior Ã­ndice de devoluÃ§Ã£o
________________________________________
7ï¸âƒ£ Tempo de Processamento
â€¢	Histograma
o	Dias atÃ© a devoluÃ§Ã£o
â€¢	Linha
o	SLA mÃ©dio por perÃ­odo
â€¢	Insight:
o	â³ Gargalos operacionais
________________________________________
ğŸ“‹ TABELAS INTELIGENTES (com filtros)
â€¢	DevoluÃ§Ãµes detalhadas
â€¢	Produtos mais devolvidos
â€¢	Clientes reincidentes
â€¢	Vendedores
â€¢	Cidades / UF
â€¢	Motivos + valor + quantidade
ğŸ’¡ Funcionalidades:
â€¢	Filtro por data, cliente, produto, vendedor, cidade, UF
â€¢	OrdenaÃ§Ã£o dinÃ¢mica
â€¢	Exportar CSV / Excel / PDF
________________________________________
ğŸš¨ ALERTAS AUTOMÃTICOS
Alertas Operacionais
â€¢	âš ï¸ Produto com devoluÃ§Ãµes acima da mÃ©dia
â€¢	âš ï¸ Cliente com aumento sÃºbito de devoluÃ§Ãµes
â€¢	âš ï¸ Vendedor acima do limite aceitÃ¡vel
â€¢	âš ï¸ Cidade/UF fora do padrÃ£o histÃ³rico
â€¢	âš ï¸ SLA estourado
________________________________________
Alertas Financeiros
â€¢	ğŸ’¸ Valor devolvido acima do limite mensal
â€¢	ğŸ“‰ Margem impactada por devoluÃ§Ãµes
________________________________________
Alertas Inteligentes (avanÃ§ado)
â€¢	ğŸ¤– Anomalias estatÃ­sticas
â€¢	ğŸ¤– Crescimento inesperado em curto perÃ­odo
â€¢	ğŸ¤– ComparaÃ§Ã£o com mÃ©dia histÃ³rica
________________________________________
ğŸ“‘ RELATÃ“RIOS AUTOMÃTICOS
RelatÃ³rios PeriÃ³dicos
â€¢	DiÃ¡rio / semanal / mensal
â€¢	Por:
o	Cliente
o	Produto
o	Vendedor
o	RegiÃ£o
o	UF
ConteÃºdo
â€¢	Resumo executivo
â€¢	KPIs
â€¢	GrÃ¡ficos principais
â€¢	Ranking
â€¢	Alertas do perÃ­odo
ğŸ“¤ Envio automÃ¡tico por:
â€¢	E-mail
â€¢	WhatsApp
â€¢	PDF
________________________________________
ğŸ§  INSIGHTS E MENSAGENS AUTOMÃTICAS
Exemplos de mensagens:
â€¢	ğŸ§  â€œO produto X teve aumento de 35% nas devoluÃ§Ãµes este mÃªs.â€
â€¢	ğŸš¨ â€œO cliente Y devolveu acima da mÃ©dia histÃ³rica.â€
â€¢	ğŸ“ â€œA cidade Z apresentou crescimento anormal.â€
â€¢	ğŸ§‘â€ğŸ’¼ â€œO vendedor A possui taxa 2x maior que a mÃ©dia.â€
â€¢	ğŸ“¦ â€œ80% das devoluÃ§Ãµes estÃ£o concentradas em 20% dos produtos.â€
________________________________________
ğŸ“ˆ GRÃFICOS AVANÃ‡ADOS (DIFERENCIAL)
â€¢	Pareto (80/20) â€“ principais causas
â€¢	Cohort Analysis â€“ devoluÃ§Ãµes por safra/cliente
â€¢	Funnel
o	Venda â†’ Entrega â†’ DevoluÃ§Ã£o â†’ Reembolso
â€¢	CorrelaÃ§Ã£o
o	Produto Ã— vendedor Ã— regiÃ£o
________________________________________
âš™ï¸ EXTRAS QUE DÃƒO MUITO VALOR
â€¢	ComparaÃ§Ã£o perÃ­odo atual Ã— anterior
â€¢	Benchmark interno
â€¢	Metas e semÃ¡foro (verde / amarelo / vermelho)
â€¢	Forecast de devoluÃ§Ãµes
â€¢	Score de risco por cliente/produto
ğŸ§± STACK DEFINIDA
â€¢	Next.js (App Router)
â€¢	TypeScript
â€¢	shadcn/ui (UI consistente e responsiva)
â€¢	Supabase
o	Auth (login)
o	Database (PostgreSQL)
o	Storage (arquivos CSV/XLSX)
â€¢	Chart lib: Recharts ou Tremor
â€¢	Parser CSV/XLSX: papaparse + xlsx
________________________________________
ğŸ‘¥ TIPOS DE USUÃRIOS (RBAC)
type UserRole = "GESTOR" | "COMERCIAL" | "LOGISTICA" | "ADMIN";
Tela	Gestor	Comercial	LogÃ­stica	Admin
Login	âœ…	âœ…	âœ…	âœ…
Dashboard	âœ…	âœ…	âœ…	âœ…
Resumo	âŒ	âœ…	âœ…	âœ…
RelatÃ³rios	âœ…	âœ…	âœ…	âœ…
SincronizaÃ§Ã£o	âŒ	âŒ	âœ…	âœ…
ConfiguraÃ§Ãµes	âŒ	âŒ	âŒ	âœ…
Perfil	âœ…	âœ…	âœ…	âœ…
________________________________________
ğŸ—‚ï¸ ESTRUTURA DE PASTAS (Next.js App Router)
src/
 â”œâ”€ app/
 â”‚   â”œâ”€ (auth)/
 â”‚   â”‚   â””â”€ login/
 â”‚   â”‚       â””â”€ page.tsx
 â”‚   â”œâ”€ (protected)/
 â”‚   â”‚   â”œâ”€ dashboard/
 â”‚   â”‚   â”œâ”€ resumo/
 â”‚   â”‚   â”œâ”€ relatorios/
 â”‚   â”‚   â”œâ”€ sincronizacao/
 â”‚   â”‚   â”œâ”€ configuracoes/
 â”‚   â”‚   â””â”€ perfil/
 â”‚   â”œâ”€ layout.tsx
 â”‚   â””â”€ page.tsx
 â”œâ”€ components/
 â”‚   â”œâ”€ sidebar.tsx
 â”‚   â”œâ”€ header.tsx
 â”‚   â”œâ”€ kpi-card.tsx
 â”‚   â”œâ”€ charts/
 â”‚   â””â”€ tables/
 â”œâ”€ lib/
 â”‚   â”œâ”€ supabase.ts
 â”‚   â”œâ”€ auth.ts
 â”‚   â”œâ”€ rbac.ts
 â”‚   â””â”€ permissions.ts
 â”œâ”€ hooks/
 â”œâ”€ types/
 â””â”€ utils/
________________________________________
ğŸ” CONTROLE DE ACESSO (RBAC)
Mapeamento de permissÃµes
export const permissions = {
  dashboard: ["GESTOR", "COMERCIAL", "LOGISTICA", "ADMIN"],
  resumo: ["COMERCIAL", "LOGISTICA", "ADMIN"],
  relatorios: ["GESTOR", "COMERCIAL", "LOGISTICA", "ADMIN"],
  sincronizacao: ["LOGISTICA", "ADMIN"],
  configuracoes: ["ADMIN"],
  perfil: ["GESTOR", "COMERCIAL", "LOGISTICA", "ADMIN"],
};
Guard de rota
export function hasAccess(role: UserRole, page: keyof typeof permissions) {
  return permissions[page].includes(role);
}
________________________________________
ğŸ”‘ LOGIN (Supabase Auth)
â€¢	Email + senha
â€¢	Role salvo em:
o	public.users (id, role, name, ...)
â€¢	ApÃ³s login:
o	Buscar role
o	Redirecionar para /dashboard
________________________________________
ğŸ“Š TELAS â€” O QUE CADA UMA FAZ
ğŸ”µ DASHBOARD (Todos)
VisÃ£o executiva
â€¢	KPIs:
o	Total devoluÃ§Ãµes
o	Valor devolvido
o	Taxa de devoluÃ§Ã£o
o	SLA mÃ©dio
â€¢	GrÃ¡ficos:
o	Linha: devoluÃ§Ãµes no tempo
o	Barra: top produtos
o	Mapa: UF / cidade
â€¢	Filtros globais:
o	Data, cliente, produto, vendedor, UF
________________________________________
ğŸŸ¢ RESUMO (Comercial, LogÃ­stica, Admin)
â€¢	Cards por:
o	Produto
o	Cliente
o	Vendedor
â€¢	Pareto 80/20
â€¢	Insights automÃ¡ticos (texto)
________________________________________
ğŸ“ˆ RELATÃ“RIOS (Todos)
â€¢	Tabelas avanÃ§adas:
o	DevoluÃ§Ãµes detalhadas
â€¢	Filtros dinÃ¢micos
â€¢	ExportaÃ§Ã£o:
o	CSV
o	XLSX
o	PDF
â€¢	Comparativo perÃ­odo atual Ã— anterior
________________________________________
ğŸ”„ SINCRONIZAÃ‡ÃƒO (LogÃ­stica, Admin)
Upload de arquivos
â€¢	CSV
â€¢	XLSX
Fluxo
1.	Upload
2.	Preview dos dados
3.	ValidaÃ§Ã£o:
o	Campos obrigatÃ³rios
o	Datas
o	Valores
4.	ConfirmaÃ§Ã£o
5.	PersistÃªncia no Supabase
HistÃ³rico
â€¢	Arquivos importados
â€¢	Status (sucesso / erro)
________________________________________
âš™ï¸ CONFIGURAÃ‡Ã•ES (Admin)
â€¢	UsuÃ¡rios:
o	Criar / editar
o	Alterar perfil
â€¢	ParÃ¢metros:
o	SLA
o	Limites de alerta
â€¢	Motivos de devoluÃ§Ã£o
â€¢	Produtos (master data)
________________________________________
ğŸ‘¤ PERFIL (Todos)
â€¢	Dados do usuÃ¡rio
â€¢	Alterar senha
â€¢	PreferÃªncias
â€¢	GrÃ¡ficos do usuÃ¡rio
â€¢	Totais do usuÃ¡rio
â€¢	Resumo do usuario
â€¢	Tema (dark/light)
________________________________________
ğŸ—„ï¸ MODELAGEM BÃSICA DO BANCO (Supabase)
users
id uuid
name text
email text
role text
senha
returns (devoluÃ§Ãµes)
id uuid
cliente text
produto text
vendedor text
cidade text
uf text
motivo text
quantidade int
valor numeric
data date
uploads
id uuid
filename text
status text
uploaded_at timestamp
user_id uuid
________________________________________
ğŸš¨ ALERTAS (FUTURO)
â€¢	Trigger SQL ou Edge Functions:
o	Produto acima da mÃ©dia
o	Cliente reincidente
â€¢	NotificaÃ§Ã£o:
o	Badge no dashboard
o	Email / WhatsApp
________________________________________
ğŸ¨ UI (shadcn)
â€¢	Sidebar com itens filtrados por role
â€¢	Cards com Card, Badge, Tabs
â€¢	Tabelas com DataTable
â€¢	Charts com layout responsivo
â€¢	Dark mode nativo


Na tela de login, funÃ§Ã£o de cadastro de usuÃ¡rio.
Cadastro de usuÃ¡rio:

Nome do usuÃ¡rio
Email
Senha
na tela de perfil, o usuario vai ver graficos, cards, resumo das suas devolucoes quero filtros nas telas de resumo, dashboard, perfil, relatorios. filtros: dinamico (de pesquisa digitacional que buscar qualquer informaÃ§Ã£o) entre datas periodo: hoje, ontem, essa semana, semana passada, mes atual, mes anterior, trimestre atual, semestre atual, ano atual. vendedor cidade cliente UF rede motivo setor
Perfeito ğŸ‘
Com isso dÃ¡ pra deixar o app bem profissional, consistente e escalÃ¡vel. Vou te entregar:
1.	Como desenhar o sistema de filtros (global e reutilizÃ¡vel)
2.	Como cada tela usa esses filtros
3.	O que mostrar na tela PERFIL (grÃ¡ficos, cards, resumo)
4.	Modelo de dados para suportar os filtros
5.	UX/UI com shadcn
Tudo pensado para Next.js + TypeScript + Supabase.
________________________________________
ğŸ§  CONCEITO-CHAVE: FILTROS GLOBAIS
ğŸ‘‰ VocÃª NÃƒO quer implementar filtros diferentes em cada tela.
O ideal Ã© um FilterContext global, reutilizado em:
â€¢	Dashboard
â€¢	Resumo
â€¢	RelatÃ³rios
â€¢	Perfil
________________________________________
ğŸ›ï¸ FILTROS DEFINIDOS
ğŸ¯ Tipos de filtros
â€¢	ğŸ” Pesquisa dinÃ¢mica (digitacional)
o	Busca em: cliente, produto, vendedor, cidade, UF, motivo, rede, setor
â€¢	ğŸ“… Entre datas (date range)
â€¢	â± PerÃ­odo prÃ©-definido
o	Hoje
o	Ontem
o	Esta semana
o	Semana passada
o	MÃªs atual
o	MÃªs anterior
o	Trimestre atual
o	Semestre atual
o	Ano atual
â€¢	ğŸ‘¤ Vendedor
â€¢	ğŸ™ Cidade
â€¢	ğŸ§¾ Cliente
â€¢	ğŸ—º UF
â€¢	ğŸª Rede
â€¢	ğŸ“¦ Motivo
â€¢	ğŸ­ Setor
________________________________________
ğŸ§© MODELO DE FILTROS (TYPE SAFE)
export type Period =
  | "TODAY"
  | "YESTERDAY"
  | "THIS_WEEK"
  | "LAST_WEEK"
  | "THIS_MONTH"
  | "LAST_MONTH"
  | "THIS_QUARTER"
  | "THIS_SEMESTER"
  | "THIS_YEAR";

export interface Filters {
  search?: string;
  startDate?: Date;
  endDate?: Date;
  period?: Period;
  vendedor?: string[];
  cidade?: string[];
  cliente?: string[];
  uf?: string[];
  rede?: string[];
  motivo?: string[];
  setor?: string[];
}
________________________________________
ğŸ§± FILTER CONTEXT (GLOBAL)
const FilterContext = createContext<{
  filters: Filters;
  setFilters: (filters: Filters) => void;
}>({} as any);

export function FilterProvider({ children }: Props) {
  const [filters, setFilters] = useState<Filters>({});

  return (
    <FilterContext.Provider value={{ filters, setFilters }}>
      {children}
    </FilterContext.Provider>
  );
}
â¡ï¸ Envolver o (protected)/layout.tsx com esse provider.
________________________________________
ğŸ¨ UI DOS FILTROS (shadcn)
ğŸ” Barra fixa de filtros (topo)
Componentes:
â€¢	Input â†’ ğŸ” Pesquisa dinÃ¢mica
â€¢	Select â†’ PerÃ­odo
â€¢	DatePicker â†’ Entre datas
â€¢	MultiSelect â†’ vendedor, cliente, cidade, UF, etc
â€¢	Button â†’ Limpar filtros
â€¢	Badge â†’ filtros ativos
ğŸ’¡ UX:
â€¢	Filtros colapsÃ¡veis
â€¢	Chips mostrando filtros ativos
â€¢	Persistir filtros (localStorage ou URL)
________________________________________
ğŸ“Š COMO CADA TELA USA OS FILTROS
________________________________________
ğŸ”µ DASHBOARD
Cards (KPIs)
â€¢	Total devoluÃ§Ãµes
â€¢	Valor devolvido
â€¢	Taxa de devoluÃ§Ã£o
â€¢	SLA mÃ©dio
â¡ï¸ Todos calculados com base nos filtros ativos
GrÃ¡ficos
â€¢	Linha: devoluÃ§Ãµes no tempo
â€¢	Barra: produtos / motivos
â€¢	Mapa: UF / cidade
________________________________________
ğŸŸ¢ RESUMO
Cards por dimensÃ£o
â€¢	Produto
â€¢	Cliente
â€¢	Vendedor
â€¢	Rede
â€¢	Setor
GrÃ¡ficos
â€¢	Pareto 80/20
â€¢	Ranking
Insights automÃ¡ticos
â€œ80% das devoluÃ§Ãµes vÃªm de 3 produtos neste perÃ­odoâ€
________________________________________
ğŸ‘¤ PERFIL (NOVIDADE IMPORTANTE)
Aqui o filtro automÃ¡tico Ã© o usuÃ¡rio logado.
ğŸ¯ Regra
â€¢	UsuÃ¡rio vÃª somente devoluÃ§Ãµes relacionadas a ele
o	Ex: vendedor = usuÃ¡rio
o	ou cliente = usuÃ¡rio (dependendo do papel)
Cards
â€¢	Minhas devoluÃ§Ãµes
â€¢	Valor total devolvido
â€¢	Taxa de devoluÃ§Ã£o pessoal
â€¢	Ranking (posiÃ§Ã£o)
GrÃ¡ficos
â€¢	Linha: minhas devoluÃ§Ãµes no tempo
â€¢	Barra: motivos mais comuns
â€¢	ComparaÃ§Ã£o:
o	â€œVocÃª Ã— mÃ©dia da empresaâ€
Resumo textual
â€¢	â€œVocÃª estÃ¡ acima/abaixo da mÃ©diaâ€
â€¢	â€œPrincipal motivo: Xâ€
________________________________________
ğŸ“ˆ RELATÃ“RIOS
â€¢	Tabela detalhada
â€¢	Todos os filtros ativos
â€¢	Agrupamentos:
o	Por cliente
o	Por vendedor
o	Por cidade / UF
â€¢	ExportaÃ§Ãµes respeitam filtros
________________________________________
ğŸ—„ï¸ BANCO DE DADOS (SUPORTE A FILTROS)
returns (
  id uuid,
  data date,
  cliente text,
  vendedor text,
  cidade text,
  uf text,
  rede text,
  setor text,
  motivo text,
  valor numeric,
  quantidade int
)
ğŸ“Œ Criar Ã­ndices:
â€¢	data
â€¢	vendedor
â€¢	cliente
â€¢	cidade
â€¢	uf
â€¢	rede
â€¢	setor
________________________________________
ğŸ” FILTRO DINÃ‚MICO (SEARCH)
No Supabase:
or(
  cliente.ilike.%search%,
  vendedor.ilike.%search%,
  cidade.ilike.%search%,
  motivo.ilike.%search%,
  rede.ilike.%search%
)
________________________________________
â±ï¸ PERÃODOS AUTOMÃTICOS
FunÃ§Ã£o utilitÃ¡ria:
getDateRange(period: Period): { start: Date; end: Date }
Usada em TODAS as telas.
________________________________________
âœ¨ DIFERENCIAIS UX
â€¢	Filtros sincronizados com URL
â€¢	Salvar filtros favoritos
â€¢	ComparaÃ§Ã£o entre perÃ­odos
â€¢	Loading skeleton
â€¢	Mensagens inteligentes:
â€œNenhum dado encontrado para este filtroâ€
SETOR MOTIVOS Vendas Acordo Comercial Vendas Devolucao Por Refaturamento Comercial Vendas Avaria Vendas Produto Em Desacordo Com O Pedido Vendas Diferenca De Preco Vendas Sem Devolutiva Comercial Vendas Excesso Mercadoria Vendas Mercadoria De Analise Qualidade Div. Padrao Qualidade Qualidade Falha Na Producao/Repasse: (Selecao Incorreta Dos Fruto Qualidade Acordo De Qualidade Logistica Falta Da Mercadoria Logistica Falta De Peso Logistica Falha Operacional Logistica Devolucao Por Refaturamento Operacional Logistica Atraso Na Entrega Logistica Falha No Transporte Logistica Sinistro Logistica Erro De Separacao Logistica Acordo Operacional Compras Compra Nao Conforme Compras Acordo De Compra Exportacoes Devolucao Exportacao Central Administrativa Devolucao Por Refaturamento Erro De Cadastro Cliente Devolucao Indevida 
Perfeito â€” isso que vocÃª mandou Ã© master data crÃ­tica do sistema.
Vou te mostrar como transformar essa lista em algo profissional e reutilizÃ¡vel no seu app:
1.	ğŸ“¦ Modelagem correta no Supabase
2.	ğŸ§  Estrutura Setor â†’ Motivos
3.	ğŸ›ï¸ Uso nos filtros (dependentes)
4.	ğŸ§¾ Seed SQL pronta
5.	ğŸ§‘â€ğŸ’» Tipos TypeScript
6.	ğŸ“Š Como explorar isso nos dashboards
________________________________________
1ï¸âƒ£ CONCEITO CORRETO (IMPORTANTE)
ğŸ‘‰ Motivo SEMPRE pertence a um Setor
ğŸ‘‰ Setor Ã© uma dimensÃ£o analÃ­tica
ğŸ‘‰ Motivo Ã© uma causa especÃ­fica da devoluÃ§Ã£o
Isso permite:
â€¢	Filtro por Setor
â€¢	Filtro por Motivo
â€¢	GrÃ¡ficos: DevoluÃ§Ãµes por Setor, Motivos por Setor
â€¢	Alertas inteligentes por Ã¡rea responsÃ¡vel
________________________________________
2ï¸âƒ£ MODELAGEM NO SUPABASE (RECOMENDADA)
ğŸ—‚ï¸ Tabela: sectors
create table sectors (
  id uuid primary key default gen_random_uuid(),
  name text not null unique,
  created_at timestamp default now()
);
ğŸ—‚ï¸ Tabela: return_reasons
create table return_reasons (
  id uuid primary key default gen_random_uuid(),
  sector_id uuid references sectors(id),
  name text not null,
  created_at timestamp default now(),
  unique (sector_id, name)
);
ğŸ—‚ï¸ Relacionamento com devoluÃ§Ãµes
alter table returns
add column sector_id uuid references sectors(id),
add column reason_id uuid references return_reasons(id);
â— Evite texto livre em returns.motivo
Sempre use FK â†’ isso garante qualidade nos dados.
________________________________________
3ï¸âƒ£ SEED SQL (SEUS DADOS)
ğŸ”¹ Setores
insert into sectors (name) values
('Vendas'),
('Qualidade'),
('Logistica'),
('Compras'),
('Exportacoes'),
('Central Administrativa'),
('Cliente');
ğŸ”¹ Motivos
-- VENDAS
insert into return_reasons (sector_id, name)
select s.id, r.name from sectors s,
unnest(array[
  'Acordo Comercial',
  'Devolucao Por Refaturamento Comercial',
  'Avaria',
  'Produto Em Desacordo Com O Pedido',
  'Diferenca De Preco',
  'Sem Devolutiva Comercial',
  'Excesso Mercadoria',
  'Mercadoria De Analise'
]) r(name)
where s.name = 'Vendas';

-- QUALIDADE
insert into return_reasons (sector_id, name)
select s.id, r.name from sectors s,
unnest(array[
  'Div. Padrao Qualidade',
  'Falha Na Producao/Repasse: Selecao Incorreta Dos Frutos',
  'Acordo De Qualidade'
]) r(name)
where s.name = 'Qualidade';

-- LOGISTICA
insert into return_reasons (sector_id, name)
select s.id, r.name from sectors s,
unnest(array[
  'Falta Da Mercadoria',
  'Falta De Peso',
  'Falha Operacional',
  'Devolucao Por Refaturamento Operacional',
  'Atraso Na Entrega',
  'Falha No Transporte',
  'Sinistro',
  'Erro De Separacao',
  'Acordo Operacional'
]) r(name)
where s.name = 'Logistica';

-- COMPRAS
insert into return_reasons (sector_id, name)
select s.id, r.name from sectors s,
unnest(array[
  'Compra Nao Conforme',
  'Acordo De Compra'
]) r(name)
where s.name = 'Compras';

-- EXPORTACOES
insert into return_reasons (sector_id, name)
select s.id, r.name from sectors s,
unnest(array[
  'Devolucao Exportacao'
]) r(name)
where s.name = 'Exportacoes';

-- CENTRAL ADMINISTRATIVA
insert into return_reasons (sector_id, name)
select s.id, r.name from sectors s,
unnest(array[
  'Devolucao Por Refaturamento Erro De Cadastro'
]) r(name)
where s.name = 'Central Administrativa';

-- CLIENTE
insert into return_reasons (sector_id, name)
select s.id, r.name from sectors s,
unnest(array[
  'Devolucao Indevida'
]) r(name)
where s.name = 'Cliente';
________________________________________
4ï¸âƒ£ TIPOS TYPESCRIPT (FRONTEND)
export interface Sector {
  id: string;
  name: string;
}

export interface ReturnReason {
  id: string;
  name: string;
  sector_id: string;
  sector?: Sector;
}
________________________________________
5ï¸âƒ£ FILTROS DEPENDENTES (UX PROFISSIONAL)
ğŸ›ï¸ Comportamento esperado
â€¢	UsuÃ¡rio escolhe Setor
â€¢	Campo Motivo mostra apenas motivos daquele setor
Exemplo lÃ³gico:
const filteredReasons = reasons.filter(
  r => selectedSectors.includes(r.sector_id)
);
ğŸ’¡ Isso evita erro humano e melhora muito a anÃ¡lise.
________________________________________
6ï¸âƒ£ COMO USAR NOS GRÃFICOS & DASHBOARD
ğŸ“Š GrÃ¡ficos recomendados
ğŸ”¹ Barra
â€¢	DevoluÃ§Ãµes por Setor
ğŸ”¹ Barra empilhada
â€¢	Setor Ã— Motivo
ğŸ”¹ Pareto
â€¢	Motivos mais impactantes (valor)
ğŸ”¹ Heatmap
â€¢	Setor Ã— UF
â€¢	Setor Ã— Vendedor
________________________________________
7ï¸âƒ£ ALERTAS INTELIGENTES (EXEMPLOS)
â€¢	ğŸš¨ â€œLogÃ­stica teve aumento de 22% em devoluÃ§Ãµes por Atraso na Entregaâ€
â€¢	ğŸš¨ â€œQualidade responde por 40% das devoluÃ§Ãµes neste mÃªsâ€
â€¢	ğŸš¨ â€œMotivo â€˜Erro de SeparaÃ§Ã£oâ€™ acima da mÃ©dia histÃ³ricaâ€
________________________________________
8ï¸âƒ£ BOAS PRÃTICAS IMPORTANTES
âœ… NÃ£o permitir cadastro livre de motivo
âœ… Manter histÃ³rico (nÃ£o apagar motivos antigos)
âœ… Logs de alteraÃ§Ã£o (Admin)

TELA DE CONFIGURAÃ‡Ã•ES:

USUARIO ADMIN PODE CADASTRAR NOVOS MOTIVOS, VENDEDORES, CLIENTES (REDE, UF, CIDADE, ETC), E CRIAR NOVOS USUARIOS. TAMBEM PODE ALTERAR QUALQUER USUARIO E SEU TIPO, SUA SENHA, NOME, E PODE EXCLUIR TAMBEM. 

NA TELA DE PERFIL, O USUARIO ADMINISTRADOR VERÃ AS ULTIMAS ALTERAÃ‡Ã•ES DOS USUARIOS REALIZOU NA TELA DE VALIDAÃ‡ÃƒO (RESUMO = TELA DE VALIDAÃ‡ÃƒO)

TROCAR O NOME DA TELA DE RESUMO PARA VALIDAÃ‡ÃƒO.
LEMBRANDO QUE NA TELA DE SINCRONIZAÃ‡ÃƒO, AO IMPORTAR O XLSX OU CSV, VAI SALVAR NO APP AS INFORMAÃ‡Ã•ES DAS COLUNAS E INFORMAÃ‡Ã•ES QUE TEM â€œAPARECERâ€ E NO SUPABASE VAI SALVAR TODAS AS COLUNAS E INFORMAÃ‡Ã•ES. EXEMPLO NO PRINT DAS COLUNAS EM ANEXO.

COLUNAS	TABELA SUPABASE	TABELA VISUAL NO APP
CNPJ DestinatÃ¡rio	MANTER	NÃƒO APARECER
DestinatÃ¡rio	MANTER	NÃƒO APARECER
Nome Filial	DA LISTA DE FILIAIS (VAI SE BASEAR NO CNPJ X TABELA FILIAIS)	APARECER
Cidade Destino	MANTER	NÃƒO APARECER
UF Destino	MANTER	NÃƒO APARECER
CNPJ Emitente	MANTER	NÃƒO APARECER
Nome PJ Emitente	MANTER	NÃƒO APARECER
Nome Cliente	DA LISTA DE CLIENTES (VAI SE BASEAR NO CNPJ X TABELA CLIENTES)	APARECER
Cidade Origem	MANTER	APARECER
UF Origem	MANTER	APARECER
Chave de Acesso	MANTER	NÃƒO APARECER
Data EmissÃ£o	MANTER	APARECER
NÃºmero	MANTER	APARECER
SÃ©rie	MANTER	NÃƒO APARECER
Valor Total da Nota	MANTER	APARECER
Peso lÃ­quido	MANTER	APARECER
Tipo	MANTER	NÃƒO APARECER
Status	MANTER	NÃƒO APARECER
SincronizaÃ§Ã£o ERP	MANTER	APARECER
Nome ou e-mail do usuÃ¡rio que fez a sincronizaÃ§Ã£o	MANTER	NÃƒO APARECER
Data da sincronizaÃ§Ã£o	MANTER	NÃƒO APARECER
Finalidade NFe	MANTER	APARECER
Natureza OperaÃ§Ã£o	MANTER	NÃƒO APARECER
CFOPs da Nota	MANTER	NÃƒO APARECER
Dados Adicionais	MANTER	APARECER
[Item] DescriÃ§Ã£o	MANTER	APARECER (FICA OCULTO COM SETA DE CLIQUE PARA EXPANSÃƒO E INFORMAÃ‡ÃƒO COMPLETA)
[Item] Unidade	MANTER	APARECER (FICA OCULTO COM SETA DE CLIQUE PARA EXPANSÃƒO E INFORMAÃ‡ÃƒO COMPLETA)
[Item] Quantidade	MANTER	APARECER (FICA OCULTO COM SETA DE CLIQUE PARA EXPANSÃƒO E INFORMAÃ‡ÃƒO COMPLETA)
[Item] Valor UnitÃ¡rio	MANTER	APARECER (FICA OCULTO COM SETA DE CLIQUE PARA EXPANSÃƒO E INFORMAÃ‡ÃƒO COMPLETA)
[Item] Valor Total Bruto	MANTER	APARECER (FICA OCULTO COM SETA DE CLIQUE PARA EXPANSÃƒO E INFORMAÃ‡ÃƒO COMPLETA)
[Item] NÃºmero do Item.	MANTER	APARECER (FICA OCULTO COM SETA DE CLIQUE PARA EXPANSÃƒO E INFORMAÃ‡ÃƒO COMPLETA)
Etiquetas	MANTER	NÃƒO APARECER
Vendedor	DA LISTA DE VENDEDORES (VAI SE BASEAR NA TABELA CLIENTES)	APARECER
Motivo	DA LISTA DE MOTIVOS (TABELA DE MOTIVOS)	APARECER
Justificativa	MANTER	APARECER
Resultado	DA LISTA DE RESULTADOS	APARECER

RESUMO GERAL DO PROMPT DO APP:

ğŸ“Œ ESPECIFICAÃ‡ÃƒO DO APLICATIVO WEB DE DEVOLUÃ‡Ã•ES
1ï¸âƒ£ OBJETIVO DO SISTEMA
Criar um aplicativo web responsivo para gestÃ£o, anÃ¡lise e validaÃ§Ã£o de devoluÃ§Ãµes, com dashboards, relatÃ³rios, alertas e ingestÃ£o de dados via CSV/XLSX, atendendo diferentes perfis de usuÃ¡rios.
________________________________________
2ï¸âƒ£ STACK TECNOLÃ“GICA
â€¢	Frontend
o	Next.js (App Router)
o	TypeScript
o	shadcn/ui
â€¢	Backend / Infra
o	Supabase
ï‚§	Auth (login/cadastro)
ï‚§	PostgreSQL (database)
ï‚§	Storage (arquivos CSV/XLSX)
â€¢	GrÃ¡ficos
o	Recharts ou Tremor
â€¢	ImportaÃ§Ã£o de arquivos
o	papaparse (CSV)
o	xlsx (Excel)
________________________________________
3ï¸âƒ£ TELAS DO SISTEMA
Telas disponÃ­veis
â€¢	Login (com cadastro de usuÃ¡rio)
â€¢	Dashboard
â€¢	ValidaÃ§Ã£o (antiga â€œResumoâ€)
â€¢	RelatÃ³rios
â€¢	SincronizaÃ§Ã£o
â€¢	ConfiguraÃ§Ãµes
â€¢	Perfil
â¡ï¸ Todos os usuÃ¡rios tÃªm acesso Ã  tela de Login
________________________________________
4ï¸âƒ£ TIPOS DE USUÃRIOS (RBAC)
type UserRole = "GESTOR" | "COMERCIAL" | "LOGISTICA" | "ADMIN";
Tela	Gestor	Comercial	LogÃ­stica	Admin
Login	âœ…	âœ…	âœ…	âœ…
Dashboard	âœ…	âœ…	âœ…	âœ…
ValidaÃ§Ã£o	âŒ	âœ…	âœ…	âœ…
RelatÃ³rios	âœ…	âœ…	âœ…	âœ…
SincronizaÃ§Ã£o	âŒ	âŒ	âœ…	âœ…
ConfiguraÃ§Ãµes	âŒ	âŒ	âŒ	âœ…
Perfil	âœ…	âœ…	âœ…	âœ…
________________________________________
5ï¸âƒ£ DASHBOARD (VISÃƒO EXECUTIVA)
KPIs (cards)
â€¢	Total de devoluÃ§Ãµes (perÃ­odo)
â€¢	Valor total devolvido
â€¢	Quantidade de produtos devolvidos
â€¢	Clientes com mais devoluÃ§Ãµes
â€¢	Vendedores com maior Ã­ndice de devoluÃ§Ã£o
â€¢	Taxa de devoluÃ§Ã£o (%)
â€¢	Tempo mÃ©dio atÃ© devoluÃ§Ã£o
â€¢	DevoluÃ§Ãµes fora do SLA
GrÃ¡ficos
â€¢	EvoluÃ§Ã£o no tempo (linha/Ã¡rea)
â€¢	Motivos de devoluÃ§Ã£o (barra/pizza)
â€¢	Top produtos devolvidos
â€¢	DevoluÃ§Ãµes por cliente
â€¢	DevoluÃ§Ãµes por vendedor
â€¢	Mapa geogrÃ¡fico (UF / Cidade)
â€¢	Tempo de processamento (SLA)
________________________________________
6ï¸âƒ£ VALIDAÃ‡ÃƒO (ANTIGA RESUMO)
Tela focada em conferÃªncia e validaÃ§Ã£o operacional.
â€¢	Cards por:
o	Produto
o	Cliente
o	Vendedor
o	Rede
o	Setor
â€¢	Pareto 80/20
â€¢	Rankings
â€¢	Insights automÃ¡ticos
â€¢	Lista de devoluÃ§Ãµes pendentes de validaÃ§Ã£o
________________________________________
7ï¸âƒ£ RELATÃ“RIOS
â€¢	Tabelas detalhadas
â€¢	Agrupamentos:
o	Cliente
o	Produto
o	Vendedor
o	Cidade / UF
o	Setor / Motivo
â€¢	ComparaÃ§Ã£o entre perÃ­odos
â€¢	ExportaÃ§Ã£o:
o	CSV
o	XLSX
o	PDF
________________________________________
8ï¸âƒ£ PERFIL DO USUÃRIO
Para todos os usuÃ¡rios
â€¢	Dados pessoais
â€¢	AlteraÃ§Ã£o de senha
â€¢	PreferÃªncias
â€¢	Tema (dark/light)
InformaÃ§Ãµes analÃ­ticas
â€¢	Cards com mÃ©tricas do prÃ³prio usuÃ¡rio
â€¢	GrÃ¡ficos pessoais
â€¢	ComparaÃ§Ã£o com mÃ©dia da empresa
â€¢	Resumo textual automÃ¡tico
Extra (Admin)
â€¢	Visualizar histÃ³rico de alteraÃ§Ãµes realizadas na tela de ValidaÃ§Ã£o
________________________________________
9ï¸âƒ£ FILTROS GLOBAIS (TODAS AS TELAS)
Tipos de filtros
â€¢	ğŸ” Pesquisa dinÃ¢mica (texto livre)
â€¢	ğŸ“… Intervalo de datas
â€¢	â± PerÃ­odos rÃ¡pidos:
o	Hoje
o	Ontem
o	Esta semana / semana passada
o	MÃªs atual / mÃªs anterior
o	Trimestre atual
o	Semestre atual
o	Ano atual
â€¢	Filtros por:
o	Vendedor
o	Cliente
o	Cidade
o	UF
o	Rede
o	Setor
o	Motivo
â¡ï¸ Filtros compartilhados via FilterContext global
________________________________________
ğŸ”„ 10ï¸âƒ£ SINCRONIZAÃ‡ÃƒO (CSV / XLSX)
Fluxo
1.	Upload do arquivo
2.	Preview dos dados
3.	ValidaÃ§Ã£o
4.	ConfirmaÃ§Ã£o
5.	PersistÃªncia no Supabase
Regra importante
â€¢	Supabase: salva todas as colunas
â€¢	App (visual): exibe apenas colunas marcadas como â€œAPARECERâ€
________________________________________
11ï¸âƒ£ REGRAS DE COLUNAS (IMPORTAÃ‡ÃƒO)
Exemplo de comportamento
Coluna	Supabase	App
CNPJ DestinatÃ¡rio	Manter	NÃ£o aparecer
Nome Filial	Derivado da tabela Filiais	Aparecer
Nome Cliente	Derivado da tabela Clientes	Aparecer
UF Origem	Manter	Aparecer
Valor Total da Nota	Manter	Aparecer
Itens da Nota	Manter	Aparecer (expansÃ­vel)
Motivo	Tabela de Motivos	Aparecer
Resultado	Tabela de Resultados	Aparecer
â¡ï¸ Itens da nota ficam ocultos com expansÃ£o (accordion)
________________________________________
12ï¸âƒ£ CONFIGURAÃ‡Ã•ES (ADMIN)
â€¢	Cadastro e gestÃ£o de:
o	UsuÃ¡rios
o	Perfis (roles)
o	Motivos de devoluÃ§Ã£o
o	Setores
o	Vendedores
o	Clientes
o	Redes
â€¢	Alterar:
o	Nome
o	Email
o	Senha
o	Perfil
â€¢	Excluir usuÃ¡rios
â€¢	Logs de alteraÃ§Ãµes
________________________________________
13ï¸âƒ£ MASTER DATA â€” SETOR Ã— MOTIVO
â€¢	Motivo pertence obrigatoriamente a um Setor
â€¢	Cadastro via ConfiguraÃ§Ãµes
â€¢	Usado em:
o	Filtros dependentes
o	GrÃ¡ficos
o	Alertas
o	RelatÃ³rios
________________________________________
14ï¸âƒ£ ALERTAS E INSIGHTS
Operacionais
â€¢	Produto acima da mÃ©dia
â€¢	Cliente reincidente
â€¢	SLA estourado
â€¢	RegiÃ£o fora do padrÃ£o
Financeiros
â€¢	Valor devolvido acima do limite
â€¢	Impacto na margem
Inteligentes
â€¢	Anomalias
â€¢	ComparaÃ§Ã£o com histÃ³rico
â€¢	Crescimento inesperado
________________________________________
15ï¸âƒ£ DIFERENCIAIS DE UX
â€¢	Filtros persistentes (URL / localStorage)
â€¢	Skeleton loading
â€¢	Mensagens inteligentes
â€¢	Dashboards responsivos
â€¢	NavegaÃ§Ã£o por role
â€¢	Performance otimizada
________________________________________
âœ… RESULTADO ESPERADO
Um aplicativo web corporativo, escalÃ¡vel, seguro e analÃ­tico, com:
â€¢	Dados confiÃ¡veis
â€¢	VisÃ£o executiva e operacional
â€¢	Processo claro de validaÃ§Ã£o
â€¢	Forte capacidade de anÃ¡lise e decisÃ£o
